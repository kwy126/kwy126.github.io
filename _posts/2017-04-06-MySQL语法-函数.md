## 数据类型转换

#### 强制转换（`cast`）

###### 数值类型转换成字符类型

```

mysql> SELECT 38.8, CAST(38.8 AS CHAR);

        -> 38.8, '38.8'

```

###### 字符串转换成数值类型

```

mysql> select cast("1234.45" as signed);

+---------------------------+

| cast("1234.45" as signed) |

+---------------------------+

|                      1234 |

+---------------------------+

1 row in set, 1 warning (0.02 sec)

```

###### 时间转换成字符串

```

mysql> select cast(current_timestamp() as char(4));

+--------------------------------------+

| cast(current_timestamp() as char(4)) |

+--------------------------------------+

| 2016                                 |

+--------------------------------------+

1 row in set, 1 warning (0.00 sec)




mysql> select cast(current_timestamp() as char);

+-----------------------------------+

| cast(current_timestamp() as char) |

+-----------------------------------+

| 2016-08-02 14:12:28               |

+-----------------------------------+

1 row in set (0.00 sec)

```

#### 强制类型（`convert`）

```

mysql> select convert(2016.223,signed);

+--------------------------+

| convert(2016.223,signed) |

+--------------------------+

| 2016 |

+--------------------------+

1 row in set (0.00 sec)

mysql> select convert(current_timestamp(),TIME);

+-----------------------------------+

| convert(current_timestamp(),TIME) |

+-----------------------------------+

| 14:29:25 |

+-----------------------------------+

1 row in set (0.00 sec)

mysql> select convert(current_timestamp(),DATE);

+-----------------------------------+

| convert(current_timestamp(),DATE) |

+-----------------------------------+

| 2016-08-02 |

+-----------------------------------+

1 row in set (0.00 sec)

mysql> select convert(current_timestamp(),DATETIME);

+---------------------------------------+

| convert(current_timestamp(),DATETIME) |

+---------------------------------------+

| 2016-08-02 14:29:39 -------------------------------------+

1 row in set (0.00 sec)

```



## 格式化整数

1.日期格式化字符串:<tt>DATE_FORMAT(date,format) </tt>

2.字符串格式化日期 :<tt>str_to_date(str,format)</tt>

```

mysql> SELECT STR_TO_DATE('15:35:00', '%H:%i:%s');  

+-------------------------------------+

| STR_TO_DATE('15:35:00', '%H:%i:%s') |

+-------------------------------------+

| 15:35:00                            |

+-------------------------------------+

1 row in set (0.00 sec)

mysql> SELECT STR_TO_DATE('01,11,2015','%d,%m,%Y');  

+--------------------------------------+

| STR_TO_DATE('01,11,2015','%d,%m,%Y') |

+--------------------------------------+

| 2015-11-01                           |

+--------------------------------------+

1 row in set (0.00 sec)  



mysql> SELECT STR_TO_DATE('15:35:00', '%H:%i:%s');  

+-------------------------------------+

| STR_TO_DATE('15:35:00', '%H:%i:%s') |

+-------------------------------------+

| 15:35:00                            |

+-------------------------------------+

1 row in set (0.00 sec)

mysql> SELECT STR_TO_DATE('01,11,2015','%d,%m,%Y');  

+--------------------------------------+

| STR_TO_DATE('01,11,2015','%d,%m,%Y') |

+--------------------------------------+

| 2015-11-01                           |

+--------------------------------------+

1 row in set (0.00 sec)  



mysql> select date_format(current_date(),'%Y-%m-%d %H:%i:%s');

+-------------------------------------------------+

| date_format(current_date(),'%Y-%m-%d %H:%i:%s') |

+-------------------------------------------------+

| 2016-08-02 00:00:00                             |

+-------------------------------------------------+

1 row in set (0.00 sec)

mysql> select date_format(current_time(),'%Y-%m-%d %H:%i:%s');

+-------------------------------------------------+

| date_format(current_time(),'%Y-%m-%d %H:%i:%s') |

+-------------------------------------------------+

| 2016-08-02 14:36:01                             |

+-------------------------------------------------+

1 row in set (0.00 sec)

mysql> select date_format(current_timestamp(),'%Y-%m-%d %H:%i:%s');

+------------------------------------------------------+

| date_format(current_timestamp(),'%Y-%m-%d %H:%i:%s') |

+------------------------------------------------------+

| 2016-08-02 14:36:20                                  |

+------------------------------------------------------+

1 row in set (0.00 sec)

mysql> select date_format(current_datetime(),'%Y-%m-%d %H:%i:%s');

ERROR 1305 (42000): FUNCTION current_datetime does not exist

```

## IP存储

`inet_aton()`,将IP转换为整数,IPv4地址转换为Numeric

```

mysql> select INET_ATON("192.168.7.2");  

+--------------------------+

| INET_ATON("192.168.7.2") |

+--------------------------+

|               3232237314 |

+--------------------------+

1 row in set (0.01 sec)  



```

`inet_ntoa()`,Numeric转换为IPv4地址

```

mysql> select INET_NTOA(3232237314);  

+-----------------------+

| INET_NTOA(3232237314) |

+-----------------------+

| 192.168.7.2           |

+-----------------------+

1 row in set (0.00 sec) 

```

`inet6_aton()`,IPv6地址转换为numeric,注意这里如果需要能查到结果，需要使用hex编码

```

mysql> SELECT HEX(INET6_ATON('fdfe::5a55:caff:fefa:9089'));  

+----------------------------------------------+

| HEX(INET6_ATON('fdfe::5a55:caff:fefa:9089')) |

+----------------------------------------------+

| FDFE0000000000005A55CAFFFEFA9089             |

+----------------------------------------------+

1 row in set (0.00 sec)  

```

* inet6_ntoa(),将numeric转换为ipv6地址

```

mysql> SELECT INET6_NTOA(UNHEX('FDFE0000000000005A55CAFFFEFA9089'));  

+-------------------------------------------------------+

| INET6_NTOA(UNHEX('FDFE0000000000005A55CAFFFEFA9089')) |

+-------------------------------------------------------+

| fdfe::5a55:caff:fefa:9089                             |

+-------------------------------------------------------+

1 row in set (0.00 sec) 



insert into host_info(host,ip) values('DB01',inet_aton('192.168.1.1'));

select host,inet_ntoa(ip) from host_info;



```


